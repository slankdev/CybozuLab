

## Jun 1 (Wed) 2016

### 今日の予定

 - gtagsとcflowを使って静的コード解析 (4.0h) -> doxygenを使用することにした
        - pktgenからパケット送信部分のコードの謎を解明
 - pktgenを使う (1.0h)
 - パケット送信のサンプルアプリケーション実装、そのまとめ (2.0h)



### 今日やった内容

 - [x] pktgenを使ってみる (1.5h)
      lcoreの割り当てでてこずった
 - [x] pktgenの静的解析 (4.0h)
      - valgrind callgrindを使った動的解析でのコールグラフ生成は失敗に終わる (1.0h)
	  - doxygenとgraphvizでとても簡単に静的解析コールグラフ生成ができる (3.0h)
      - 静的解析ツールからコールグラフ生成の方法の模索
 - [ ] パケット送信プログラムの問題修正 (3.0h) -> 解決せず。。
 - 実行環境によっては成功する。
 - gdb上でrte_eth_tx_burstにstep実行すると成功する -> ほんと意味不明。。何なんだ一体。。



### 次回の予定

 - パケット送信に成功する方法を模索
 - 実行環境が悪いなら、実行環境の再セットアップ
 - C++から呼び出す方法 -> 気分転換に次回はこれからやろうかな。。
 


### 問題点,原因,対策 (それぞれ1,2,3で分けて書く)

 1. DPDKはvalgrindによる動的解析ができない
 2. そもそもDPDKはそういうのに向いていないのか？とりあえずvalgrindみたいなその場で
    CPUを仮想するやつはダメそう
 3. 目的はコールグラフの作成なので、Doxygenとgraphvizで解決。簡単でとってもよい

 1. pktgenでパケットが送れない
 2. master coreにtxを任せるとうまくいかないと思われる。公式ドキュメントの実行例でも
    masterにtxを割り当てていなかった。
 3. 別のコアにtxは割り当てるように指定

 1. パケット送信のサンプルコードがパケットを送り出さない。。。
 2. 不明。
 3. 引き続きしらべる。だが、以下の条件下のみ成功した。
 	- VM環境での実験
	- pcap pmdを使用した場合
	- rte_eth_tx_burstにbreak pointを仕掛けて、step実行した時
	- thinkpadのdpdk環境で試した時
	これらのこと原因はデスクトップのマシン側にあるのではないかと今のところ推測
	何日立ってもこれが解決しなくて、ただただつらい。。(T ^ T)



### 感想 (あれば)

ツールの使い方や、静的解析、動的解析はだいぶなれてきた。動的解析の方が楽しい。next実行して
パケットが出たりすると単に完動する。。
ツールの使い方とかは勉強になってはいるが、DPDK関連の進捗がまったくでいなく、焦りがすこし。




### Commits


