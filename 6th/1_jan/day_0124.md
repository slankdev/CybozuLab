

[サイボウズ・ラボユース日時報告書]
---------------------------------------------------------------------------
勤務日：2017年 1月24日火曜日
報告者：城倉弘樹
---------------------------------------------------------------------------
###■ 開発プロジェクト名
 slankdev/susanoo.git

 リポジトリ名変えました。


###■ 今日の目標

 - std::threadっぽくCPUにバインドさせる関数を指定できるようにする
 - 光成さんに教えてもらった構造体の表示関数生成の作業
 - multi queueの使い方についての情報収集
 - 動作状態を確認するためのインターフェースを用意する

どの順番で行うかは未定だが、構造体表示と動作確認インターフェースの実装は絶対に取り掛かる



###■ 作業実績 (実際にかかった時間を書いてください)

 - 10:00-10:30 マシンのセットアップ
 - 10:30-14:00 構造体とenum表示関連の作業
 - 14:00-15:00 pktgen-dpdkでコアをたくさん割り当てて速度計測 -> 新しい知見
 - 15:00-18:00 動作状態を確認するためのインターフェースの用意
      - インタラクティブなshellみたいな感じに実装することに決定
	  - まだできてない。 これは勤務時間外になるべくやっておく。


###■ 達成度

20%

 - まったくと言っていいほど進捗がでなかった。。
   あたまがこんがらがったら10分休憩するべき
 - pktgenはmultiqueueを扱うように実装されているっぽい。
   rxにたくさんコアを割り当てることで、全二重通信でTx/Rx=9997/8200[Mbps]が出るようになる。
   （もちろんショートパケット）
 - pktgenの実装を参考にmultiqueueはやっていけば良さそう。


###■ 問題点,原因,対策 (それぞれ1,2,3で分けて書く)

構造体表示関数に関して
 - 正規表現などを使って関数を生成するタイプはenum程度なら
   問題はなさそうだが、構造体に関してはコメントなどがたくさんあったりして、
   面倒くさそうなので、llvmの構文解析機をライブラリとして呼び出そうとした
   llvmのpythonバインドがあったので、それで実装をしようとおもったが、
   環境構築にてこずってしまい、できなかった。
   今回は時間がなかったため、後回しにしたが、今後やっておきたい。


###■ 明日以降の予定

 - multi queueのサポート作業
 - 実験環境をより詳細に固定する. CPUクロックなどの固定が必要か、など
 - ユーザインターフェースの実装


###■ 作業リポジトリ履歴


slankdev/susanoo.git
 - [ADD] sush src
   http://github.com/slankdev/susanoo/commit/e00a2a500a8c245757b7ba408773cb9cce119448

本日はllvm関連の環境構築と設計のためコードは書けませんでした。


---------------------------------------------------------------------------
