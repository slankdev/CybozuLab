

[サイボウズ・ラボユース日時報告書]
---------------------------------------------------------------------------
勤務日：2016年10月25日火曜日
報告者：城倉弘樹
---------------------------------------------------------------------------
###■ 開発プロジェクト名
 slankdev/stcp.git


###■ 今日の目標

 - 実装を確認 1.0h
 - TCPの実装 6.0h

###■ 作業実績 (実際にかかった時間を書いてください)

 - 10:00-11:00 実装を確認 -> ソースにコメントを追加したので、後日修正する
 - 11:00-11:20 LinuxKernelのSocketでテストプログラムを動かす
 - 11:20-13:00 情報収集, 設計
 - 13:00-14:00 お昼休み
 - 14:00-15:00 情報収集, 設計
 - 15:00-17:30 TCPの実装 -> 切りのいいところで終わらず途中経過をコミット
    - 一応閉じているポートに対する動作まで実装, ハードコーディングたくさんあり


###■ 達成度

80%

UDPとくらべてだいぶややこしいので苦戦しそうな予感

TCP上でのフラグメンテーション用のAPIはDPDKに用意されていないので、
それ相当のもの(DPDKが扱える関数)を実装する必要があることが解った。


###■ 問題点,原因,対策 (それぞれ1,2,3で分けて書く)

細かい作業計画をしっかり立てなかったため、実装を初めてからもたついた.
次回はどんなことをするかを明確にまとめてから作業を始める


###■ 明日以降の予定

 - TCPの実装
     - socketオブジェクトの実装
     - listen, acceptの実装 (tcp stream確立部分)
     - データ受信時のack処理の実装
     - データを貯めておくバッファの実装
     - データを並べ替えて正しい順番にしておく機能の実装
     - フラグメント機能の実装
     - TCPフラグメントのdpdkAPIを実装

細かいタスク
 - クロック時間からmsレベルの時差を求めるutil関数


###■ 作業リポジトリ履歴

slankdev/stcp.git
 - [WokingNOW] add tcp_module.
   http://github.com/slankdev/stcp/commit/ea3fd8255fca583d044a1cf78a5469c3f71e9d39
 - [REFACT] add comment
   http://github.com/slankdev/stcp/commit/d2bb2b693233b18a09449d2a98bc9445be9b7cbd


BSDカーネルの設計と実装
 -  5章 メモリ管理
 - 11章 プロセス間通信
 - 12章 ネットワーク通信
 - 13章 ネットワークプロトコル
     - p564以降がもっとも大事

その他
 - TCP Echoサーバのサンプルスクリプト
   これを参考にしてSTCPでも同じようなアプリケーションを動かす
   https://github.com/slankdev/libslankdev/blob/master/sample/AFINET_SOCKSTREAM/main.cc

---------------------------------------------------------------------------
