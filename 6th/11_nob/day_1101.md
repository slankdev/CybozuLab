

[サイボウズ・ラボユース日時報告書]
---------------------------------------------------------------------------
勤務日：2016年11月01日火曜日
報告者：城倉弘樹
---------------------------------------------------------------------------
###■ 開発プロジェクト名
 slankdev/stcp.git


###■ 今日の目標

 - listen実装
 - acceptの実装 (tcp stream確立部分, ソケットを新たに生成する)
 - データ受信時のack処理の実装

基本的なTCPの通信を今日大体出きるようにすることが大まかな目標!

###■ 作業実績 (実際にかかった時間を書いてください)

 - 10:00-18:00 listen時の挙動の実装 (うち休憩2h)
      - PSHACKが来たときの挙動を実装


###■ 達成度

100%

 - TCPの通信ができるようになった！！！(超期本的な通信のみ)
 - 次回以降はとりあえずちゃんとしたTCPの規格にある程度それるように
   挙動を実装していく
 - TCPの実装にかんしてはBSD, Linuxを参考にしなかったので、
   それも確認しておくべきだと思う。
 - RFCを参考に実装をした


###■ 問題点,原因,対策 (それぞれ1,2,3で分けて書く)

 - とくになし
   あしたも頑張ろう


###■ 明日以降の予定

今日決めた新たなタスク
 - [ ] accept()の実装
 - [ ] ESTABLISH時にFINをうけとった時のちゃんとした挙動について未実装
 - [ ] 現在のストリームとは関係ないパケットが来たときの挙動が未実装
 - [ ] RSTパケットが着たときの挙動が未実装
 - [ ] windowサイズの更新をするための挙動が未実装
 - [ ] windowサイズ関連全般がだめ, まだてをつけていない

もともとの予定
 - [ ] listen実装
 - [ ] acceptの実装 (tcp stream確立部分, ソケットを新たに生成する)
 - [x] データ受信時のack処理の実装
 - [ ] TCPフラグメント APIの実装 (DPDKに追加する)
      - データを貯めておくバッファの実装
      - データを並べ替えて正しい順番にしておく機能の実装
 - [ ] 上を使用してフラグメントをゼロコピーで実装
 - [ ] アプリケーションのプロセスを別のスレッドで動かす



###■ 作業リポジトリ履歴

TCP/IPについての参考資料
 - RFC793 TCP 日本語訳版を使ってしまった..
   http://www5d.biglobe.ne.jp/stssk/rfc/rfc793j.html
   http://www.f4.dion.ne.jp/~adem/rfc/rfc793.euc.txt


slankdev/stcp.git
 - [ADD] behabiour to recv PSHACK with tcp-datas.
   http://github.com/slankdev/stcp/commit/6be076a6d6362b2ba20fcf5236474b78fb933e63
 - [ADD] for test
   http://github.com/slankdev/stcp/commit/72d79fd1003468084524ca003c97ee1dd0e67255

---------------------------------------------------------------------------
